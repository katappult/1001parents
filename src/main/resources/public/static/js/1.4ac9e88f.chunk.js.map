{"version":3,"sources":["pages/CommonPages/LoginPage/LoginPage.js","_components/_common/ApplicationVersion/ApplicationCopyright.js"],"names":["LOGIN_JSON_UISCHEMA","LOGIN_JSON_SCHEMA","LoginPage","props","state","submitted","loading","error","uischema","jsonschema","handleResponseError","bind","onSubmit","lostPass","form","e","this","setState","processing","preventDefault","jsonstring","JSON","stringify","jsonobject","parse","formData","loginService","login","response","status","text","authorization","commons","setSessionId","window","location","href","coreUri","backOfficeHomeURL","json","katappult_core_logout","history","push","formRegister","id","className","style","color","message","schema","uiSchema","onError","onerror","type","class","display","flexDirection","Component","password","console","debug","connect","store","userContextRX","userContext","disptach","ApplicationCopyright","target"],"mappings":";0hNAWA,IASMA,EAAsB,CAC3B,MAAS,CACR,eAAgB,OAChB,gBAAiB,GACjB,UAAW,oBACX,iBAAkB,aAEnB,SAAY,CACX,YAAa,WACb,gBAAiB,KAIbC,EAAoB,CACzB,SAAY,CAAC,QAAS,YACtB,KAAQ,SACR,WAAc,CACb,MAAS,CACR,KAAQ,SACR,MAAS,SAEV,SAAY,CACX,KAAQ,SACR,MAAS,WACT,UAAa,KAKVC,E,kDAEL,WAAYC,GAAQ,IAAD,8BAClB,cAAMA,IACDC,MAAQ,CACZC,WAAW,EACXC,SAAS,EACTC,MAAO,GACPC,SAAUR,EACVS,WAAYR,GAGb,EAAKS,oBAAsB,EAAKA,oBAAoBC,KAAzB,gBAC3B,EAAKC,SAAW,EAAKA,SAASD,KAAd,gBAChB,EAAKE,SAAW,EAAKA,SAASF,KAAd,gBAZE,E,mFAenB,WAAeG,EAAMC,GAArB,sFACCC,KAAKC,SAAS,CAACC,YAAY,IAExBH,GAAGA,EAAEI,iBACJC,EAAaC,KAAKC,UAAUR,GAC5BS,EAAaF,KAAKG,MAAMJ,GACxBK,EAAWF,EAAWE,SAN3B,SAQsBC,IAAaC,MAAMF,GARzC,YAQKG,EARL,SASoC,MAApBA,EAASC,OATzB,kCAU4BD,EAASE,OAVrC,QAUMC,EAVN,OAWEC,IAAQC,aAAaF,GACrBG,OAAOC,SAASC,KAAOC,IAAQC,oBAZjC,wBAeEtB,KAAKC,SAAS,CACbC,YAAY,EACZX,MAAO,mCAjBV,iD,0FAsBA,SAAoBgC,GACnBvB,KAAKC,SAAS,CACbC,YAAY,EACZX,MAAO,oC,+BAIT,WACCyB,IAAQQ,0B,sBAGT,SAASzB,GACLA,GAAGA,EAAEI,iBACRH,KAAKb,MAAMsC,QAAQC,KAAK,e,oBAGzB,WACC,OAA+B,IAA5B1B,KAAKZ,MAAMuC,aACN,8CAID,yBAAKC,GAAI,YAAaC,UAAW,mBACvC,yBAAKA,UAAU,kBACd,wBAAIA,UAAU,cAAd,wBACA,yBAAKA,UAAU,cACd,gCACC,uBAAGA,UAAU,cAAc7B,KAAKZ,MAAMG,OACtC,uBAAGuC,MAAO,CAACC,MAAO,MAAM,YAAY,SAAS,cAAc,cAP3DC,KAUChC,KAAKZ,MAAME,SAAW,oCACvB,kBAAC,IAAD,CAAM2C,OAAQjC,KAAKZ,MAAMK,WACtByC,SAAUlC,KAAKZ,MAAMI,SACrBI,SAAUI,KAAKJ,SACfa,SAAUA,EACV0B,QAASC,GAEX,4BAAQP,UAAU,eAAeQ,KAAK,UAAtC,mBAAiE,uBAAGC,MAAM,kBAW1EtC,KAAKZ,MAAME,SAAW,6BACvB,uBAAGgD,MAAM,qBAMZ,yBAAKT,UAAW,wCACf,yBAAKC,MAAO,CAACS,QAAS,OAAQC,cAAe,WAC5C,kBAAC,IAAD,a,GAjGmBC,aAwGlBhC,EAAW,CAACE,MAAO,GAAI+B,SAAU,IACjCN,EAAU,SAAC,EAAYrC,GAAM,EAAjBU,SACjBkC,QAAQC,MAAM7C,IAIA8C,uBApJS,SAAAC,GAAK,MAAK,CACjCC,cAAeD,EAAME,gBAIK,SAACC,GAAD,MAAe,KA+I3BJ,CAA8C3D,I,qFC7JvDgE,E,4JAEL,WACI,OAAO,8BACT,6BAAK,uBAAG9B,KAAK,yBAAyB+B,OAAQ,UAAzC,uBADI,IACoE,6BADpE,2BACiG,kC,GAJ1EV,aASpBS","file":"static/js/1.4ac9e88f.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Form from \"react-jsonschema-form\";\nimport { loginService } from '_services/login.services';\nimport { commons } from '_helpers/commons';\nimport ApplicationCopyright  from '_components/_common/ApplicationVersion/ApplicationCopyright.js';\nimport {coreUri} from \"_helpers/CoreUri\";\n\n/**\n * Format is 'store.reducer.state'\n */\nconst mapStateToProps = store => ({\n\tuserContextRX: store.userContext,\n\n});\n\nconst mapDispatchToProps = (disptach) => ({\n\n});\n\nconst LOGIN_JSON_UISCHEMA = {\n\t\"login\": {\n\t\t\"ui:autofocus\": \"true\",\n\t\t\"ui:emptyValue\": \"\",\n\t\t\"ui:help\": \"Email or nickname\",\n\t\t\"ui:placeholder\": \"me@me.com\"\n\t},\n\t\"password\": {\n\t\t\"ui:widget\": \"password\",\n\t\t\"ui:emptyValue\": \"\"\n\t}\n}\n\nconst LOGIN_JSON_SCHEMA = {\n\t\"required\": [\"login\", \"password\"],\n\t\"type\": \"object\",\n\t\"properties\": {\n\t\t\"login\": {\n\t\t\t\"type\": \"string\",\n\t\t\t\"title\": \"Login\"\n\t\t},\n\t\t\"password\": {\n\t\t\t\"type\": \"string\",\n\t\t\t\"title\": \"Password\",\n\t\t\t\"minLength\": 3\n\t\t}\n\t}\n}\n\nclass LoginPage extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tsubmitted: false,\n\t\t\tloading: false,\n\t\t\terror: '',\n\t\t\tuischema: LOGIN_JSON_UISCHEMA,\n\t\t\tjsonschema: LOGIN_JSON_SCHEMA\n\t\t}\n\n\t\tthis.handleResponseError = this.handleResponseError.bind(this);\n\t\tthis.onSubmit = this.onSubmit.bind(this);\n\t\tthis.lostPass = this.lostPass.bind(this);\n\t}\n\n\tasync onSubmit(form, e){\n\t\tthis.setState({processing: true})\n\n\t\tif(e) e.preventDefault();\n\t\tlet jsonstring = JSON.stringify(form);\n\t\tlet jsonobject = JSON.parse(jsonstring);\n\t\tlet formData = jsonobject.formData;\n\n\t\tlet response = await loginService.login(formData);\n\t\tif(response && response.status === 200) {\n\t\t\tlet authorization = await response.text();\n\t\t\tcommons.setSessionId(authorization);\n\t\t\twindow.location.href = coreUri.backOfficeHomeURL();\n\t\t}\n\t\telse {\n\t\t\tthis.setState({\n\t\t\t\tprocessing: false,\n\t\t\t\terror: 'Login ou mot de passe invalide'\n\t\t\t})\n\t\t}\n\t}\n\n\thandleResponseError(json){\n\t\tthis.setState({\n\t\t\tprocessing: false,\n\t\t\terror: 'Login error: Bad credentials.'\n\t\t})\n\t}\n\n\tcomponentDidMount(){\n\t\tcommons.katappult_core_logout();\n\t}\n\n\tlostPass(e){\n\t\tif(e) e.preventDefault();\n\t\tthis.props.history.push('/lostPass');\n\t}\n\n\trender () {\n\t\tif(this.state.formRegister === true){\n\t\t\treturn <center>Loading...</center>\n\t\t}\n\n\t\tlet message;\n\t\treturn <div id={'loginpage'} className={'login-page_root'}>\n\t\t\t<div className=\"loginpage-root\">\n\t\t\t\t<h2 className=\"main-title\">Connexion Backoffice</h2>\n\t\t\t\t<div className=\"new-filter\">\n\t\t\t\t\t<center>\n\t\t\t\t\t\t<p className=\"form-error\">{this.state.error}</p>\n\t\t\t\t\t\t<p style={{color: 'red','font-size':'0.9rem','font-weight':'bold'}}>{message}</p>\n\t\t\t\t\t</center>\n\n\t\t\t\t\t{!this.state.loading && <>\n\t\t\t\t\t\t<Form schema={this.state.jsonschema}\n\t\t\t\t\t\t\t  uiSchema={this.state.uischema}\n\t\t\t\t\t\t\t  onSubmit={this.onSubmit}\n\t\t\t\t\t\t\t  formData={formData}\n\t\t\t\t\t\t\t  onError={onerror} >\n\n\t\t\t\t\t\t\t<button className=\"login-button\" type=\"submit\">Se connecter&nbsp;<i class=\"fa fa-lock\"></i></button>\n\t\t\t\t\t\t</Form>\n\n\t\t\t\t\t\t{/*<div className=\"footer-links\">\n\t\t\t\t\t\t\t\t\t<button onClick={e=> this.props.history.push('/register/an')}>Créer un compte</button>\n\t\t\t\t\t\t\t\t\t<button onClick={this.lostPass}>Mot de passe oublié?</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t*/}\n\t\t\t\t\t</>\n\t\t\t\t\t}\n\n\t\t\t\t\t{ this.state.loading && <div>\n\t\t\t\t\t\t<i class=\"fa fa-spinner\"></i>\n\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div className={'footer-app-version login-page-footer'}>\n\t\t\t\t<div style={{display: 'flex', flexDirection: 'column'}}>\n\t\t\t\t\t<ApplicationCopyright />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t}\n}\n\nconst formData = {login: \"\", password: \"\"};\nconst onerror = ({formData}, e) => {\n\tconsole.debug(e);\n}\n\n\nexport default connect(mapStateToProps, mapDispatchToProps) (LoginPage);\n","import React, { Component } from 'react';\n\nclass ApplicationCopyright extends Component {\n\n\trender(){\n    \treturn <span>\n\t\t\t<br/><a href=\"http://katappult.cloud\" target={'_blank'}>Katappult © 2022</a>.<br/> BY NEXITIA TECHNOLOGIES<br/>\n    \t</span>\n\t}\n}\n\nexport default ApplicationCopyright;"],"sourceRoot":""}